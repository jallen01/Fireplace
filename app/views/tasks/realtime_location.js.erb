var id, target, options, success, error;

id = navigator.geolocation.watchPosition(success, error, options);

success = function(pos) {
	var crd = pos.coords;

	if (target.latitude === crd.latitude && target.longitude === crd.longitude) {
		console.log('Congratulation, you reach the target');
	    navigator.geolocation.clearWatch(id);
	}
};

error = function(err) {
  console.warn('ERROR(' + err.code + '): ' + err.message);
};
<%= list_of_locations =  Array.new %>
<% current_user.get_locations.each do |location| %>
	<%= list_of_locations.push(location) %>
	<% if location.latitude != nil && location.longitude != nil %>
		target = {
		  latitude : <%= location.latitude %>,
		  longitude: <%= location.longitude %>,
		}


options = {
  enableHighAccuracy: false,
  timeout: 5000,
  maximumAge: 0
};


<% end %>