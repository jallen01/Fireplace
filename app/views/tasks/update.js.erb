// Primary Author: Jonathan Allen (jallen01)

var modal = $("<%= j "#edit-task-#{@task.id}-modal" %>");
enable_modal(modal);

<% if @task.errors.any? %>
	modal.find("form").replaceWith("<%= j render "tasks/form", task: @task %>");
	modal.find("form").trigger("formCreated");
<% else %>
    modal.modal("hide").on("hidden.bs.modal", function () {
    	$("#tasks-list").html("<%= j render "tasks/list" %>");
    	$("#tasks-list form").trigger("formCreated");
    	$("#tasks-list").trigger("listUpdated");
    });
<% end %>