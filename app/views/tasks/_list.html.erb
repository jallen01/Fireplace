<!-- Primary Author: Jonathan Allen (jallen01) -->

<!-- Tasks list -->
<table class="table table-bordered table-hover">
	<tbody>
    <% current_user.tasks.each do |task| %>
    	<%= content_tag :tr, data: { toggle: "modal", target: "#edit-task-#{task.id}-modal", trigger: "hover", content: task.content, placement: "right", relevant: task.relevant?(@context), important: !!task.important, quick: !!task.long_lasting } do %>
    		<td>
          <p class="text-primary">
            <%= task.title %>
            <%= link_to '<i class="glyphicon glyphicon-remove"></i>'.html_safe, task, method: :delete, remote: true, data: { dismiss: "alert" }, "aria-hidden" => "true", class: "close" %>
          </p>
        </td>
  	  <% end %>
    <% end %>
  </tbody>
</table>

<!-- Edit task modals -->
<% current_user.get_tasks.each do |task| %>
  <%= render "layouts/modal_form", object: task, modal_id: "edit-task-#{task.id}-modal", modal_title: "Edit Task", modal_data: { form: "reset" }, modal_content: render("tasks/form", task: task) %>
<% end %>
