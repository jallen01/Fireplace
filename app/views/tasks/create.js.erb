// Primary Author: Jonathan Allen (jallen01)

var modal = $("#new-task-modal");
enable_modal(modal);

<% unless @new_task.errors.any? %>
	modal.modal("hide");
	$('main .container .row').prepend("<%= escape_javascript(render :partial => 'layouts/messages' , :locals => { :flash => flash }).html_safe %>")
	$("#tasks-list").html("<%= j render "tasks/list" %>");
	$("#tasks-list form").trigger("formCreated");
	$("#tasks-list").trigger("listUpdated");
<% end %>

modal.find("form").replaceWith("<%= j render "tasks/form", task: @new_task %>");
modal.find("form").trigger("formCreated");